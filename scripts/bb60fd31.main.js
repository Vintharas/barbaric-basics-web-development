console.log("'Allo 'Allo!"),function(a){"use strict";function b(a){this.prefix=a}b.prototype.setItem=function(a,b){a=this.prefix+a,"object"==typeof b&&(b=JSON.stringify(b)),window.localStorage.setItem(a,b)},b.prototype.getItem=function(a){a=this.prefix+a;var b=window.localStorage.getItem(a);try{var c=JSON.parse(b);return c}catch(d){return b}},a.localStorage=new b("iwrite.")}(window.iwrite=window.iwrite||{}),function(a){"use strict";function b(){p=document.getElementById("add-image"),p.addEventListener("click",c),q=document.getElementById("add-file"),q.addEventListener("click",d),e()}function c(){}function d(){function b(a){return r.some(function(b){return a===b})}for(var c="New File ",d="New File 1",e=1;b(d);)e++,d=c+e.toString();r.push(d),a.localStorage.setItem(s,r),a.localStorage.setItem(d,{name:d,content:"Start writing here in markdown..."}),t.loadFilesInSidebar(d)}function e(){r=a.localStorage.getItem(s)||[],t.loadFilesInSidebar()}function f(){function a(a){var b=document.createElement("a");b.innerHTML=a,b.className="list-group-item",b.href="#",b.onclick=g,d.appendChild(b)}function b(){var a=d.childNodes;a.length>0&&g.call(a[0])}var c,d=document.querySelector(".sidebar div.list-group");c=0===arguments.length?r:Array.prototype.slice.call(arguments),c.forEach(a),b()}function g(){var b=this.text;h(this),this.className="list-group-item active",console.log("opening file: "+b);var c=a.localStorage.getItem(b);i(c.content),k(c.content)}function h(a){var b=document.querySelector(".sidebar div.list-group"),c=b.childNodes;c=Array.prototype.slice.call(c),c.forEach(function(b){a===b&&(b.className="list-group-item active"),b.className="list-group-item"})}function i(a){console.log("Open editor with content: "+a);var b=j();b.value=a}function j(){var a,b,c;return(b=document.querySelector("div.editor textarea"))?b:(a=document.createElement("div"),a.className="col-md-6 col-sm-6 editor",b=document.createElement("textarea"),b.className="form-control noresize",b.noResize=!0,b.rows=10,b.addEventListener("keypress",l),a.appendChild(b),c=document.querySelector("div.content"),c.appendChild(a),b)}function k(a){m(),n(a)}function l(){var a=document.querySelector("div.editor textarea");n(a.value)}function m(){var a,b;return(a=document.querySelector("div.preview"))?a:(a=document.createElement("div"),a.className="col-md-6 col-sm-6 preview basic-borders",b=document.querySelector("div.content"),b.appendChild(a),a)}function n(a){console.log("sending data to worker: ",a),u.postMessage(a)}function o(a){var b=a.data;console.log("received data from worker: ",b);var c=document.querySelector("div.preview");c.innerHTML=b}var p,q,r,s="fileNames",t={loadFilesInSidebar:f},u=new Worker("scripts/markdownParser.js");u.onmessage=o,window.addEventListener("load",b)}(window.iwrite=window.iwrite||{});